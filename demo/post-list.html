<link rel="import" href="post-card.html">
<link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../bower_components/iron-ajax/iron-ajax.html">

<dom-module id="post-list">
	<style>
	  :host {
      display: block;
      width: 100%;
    }
    #list {
      @apply(--layout-flex);
    }
    .item {
      padding: 16px;
      @apply(--layout-horizontal);
    }
	</style>
  <template>

		<iron-ajax url="../api/service.json" last-response="{{data}}" auto></iron-ajax>

    <template is="dom-repeat" items="{{data}}">
      <div class="item">
        <post-card favorite="{{item.favorite}}" on-click="handleFavorite"
          hidden$="{{show = 'favorites' && !item.favorite}}">
          <img src="{{item.avatar}}" width="200" height="200">
          <h2>{{item.username}}</h2>
          <span>{{item.price}}</span>
          <p>{{item.text}}</p>
        </post-card>
      </div>
    </template>


	</template>

	<script>
    Polymer({
      is: 'post-list',

      handleFavorite: function(e) {
        var model = e.model;
        console.log('Favorite changed: ' + model.item.uid + ", now: " + model.item.favorite);
      }
    });
  </script>
<dom-module>
